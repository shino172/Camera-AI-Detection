<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
  <div>
    <h2 class="font-bold text-xl mb-3">Face Recognize</h2>

    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
      <div>
        <h3 class="font-semibold mb-2 text-gray-700">Pending Faces</h3>
        <div class="max-h-[480px] overflow-y-auto space-y-3">
          <div *ngIf="pending.length === 0" class="text-gray-500 text-sm text-center py-4 border rounded bg-gray-50">
            Không có gương mặt mới.
          </div>

          <div *ngFor="let p of pending; trackBy: trackByFaceId"
               class="bg-white border rounded-lg p-3 shadow-sm text-center hover:shadow-md transition">
            <img [src]="'data:image/jpeg;base64,'+p.image_b64"
                 class="w-24 h-24 mx-auto object-cover rounded-full border shadow mb-2" />

            <input [(ngModel)]="p.tempName"
                   placeholder="Nhập tên"
                   class="border p-1.5 text-sm w-full rounded focus:ring-1 focus:ring-blue-400 outline-none" />

            <div class="flex gap-2 mt-2">
              <button (click)="assignName(p.id)"
                      class="flex-1 bg-green-500 hover:bg-green-600 text-white px-2 py-1 rounded text-sm">
                Gán
              </button>
              <button (click)="deletePendingFace(p.id)"
                      class="flex-1 bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-sm">
                Xóa
              </button>
            </div>
          </div>
        </div>
      </div>

      <div>
        <h3 class="font-semibold mb-2 text-gray-700">Learned Faces</h3>
        <div class="max-h-[480px] overflow-y-auto space-y-3">
          <div *ngIf="faces.length === 0" class="text-gray-500 text-sm text-center py-4 border rounded bg-gray-50">
            Chưa có gương mặt nào.
          </div>
            <div *ngFor="let f of faces"
                class="bg-white border rounded-lg p-3 shadow-sm text-center hover:shadow-md transition">
              <img *ngIf="f.image" [src]="f.image"
                  class="w-24 h-24 object-cover rounded-full mx-auto border mb-2" />
              <div class="font-medium text-gray-800">{{ f.name }}</div>
              <div class="text-xs text-gray-500 mt-1">ID: {{ f.person_id }}</div>

              <div class="flex gap-2 mt-2">
                <button (click)="setAvatar(f.person_id, f.image)"
                        class="flex-1 bg-blue-500 hover:bg-blue-600 text-white px-2 py-1 rounded text-sm">
                  Đặt làm Avatar
                </button>
                <button (click)="deleteLearnedFace(f.id)"
                        class="flex-1 bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-sm">
                  Xóa
                </button>
              </div>
            </div>

        </div>
      </div>
    </div>
  </div>

  <div>
    <h2 class="font-bold text-xl mb-3">Danh sách nhân viên</h2>
    <div class="max-h-[480px] overflow-y-auto grid grid-cols-1 sm:grid-cols-2 gap-3">
      <div *ngIf="recognized.length === 0"
           class="text-gray-500 text-sm text-center py-4 col-span-2 border rounded bg-gray-50">
        Chưa có nhân viên nào được ghi nhận.
      </div>

      <div *ngFor="let r of recognized"
           class="border p-3 rounded-lg shadow-sm bg-white flex items-center gap-3 hover:shadow-md transition">
        <img *ngIf="r.avatar" [src]="r.avatar"
             class="w-16 h-16 rounded-full object-cover border shadow-sm" />
        <div *ngIf="!r.avatar"
             class="w-16 h-16 flex items-center justify-center rounded-full border text-gray-400 text-xs bg-gray-50">
          No Avatar
        </div>

        <div class="flex-1 min-w-0">
          <div class="font-semibold text-gray-800 truncate">{{ r.name }}</div>
          <div class="text-xs text-gray-500">ID: {{ r.person_id }}</div>

          <div class="mt-2 flex gap-2">
            <button class="px-2 py-1 bg-green-500 hover:bg-green-600 text-white rounded text-sm"
                    (click)="goToPersonDetail(r.person_id)">
              Xem
            </button>
            <button class="px-2 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded text-sm"
                    (click)="openEdit(r)">
              Sửa
            </button>
            <button class="px-2 py-1 bg-red-500 hover:bg-red-600 text-white rounded text-sm"
                    (click)="deleteFace(r.person_id)">
              Xóa
            </button>
          </div>
        </div>
      </div>

      <app-person-information
        *ngIf="editingPerson"
        [person]="editingPerson"
        (closed)="closeEdit()"
        (updated)="refreshData()">
      </app-person-information>
    </div>
  </div>
</div>
